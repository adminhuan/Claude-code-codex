# 更新日志 (Changelog)

所有重要的项目更改都将记录在此文件中。

## [2.0.0] - 2025-10-03

### 🎉 重大更新 - 全面增强搜索功能 + 自动文件保存

#### ✨ 新增功能
- **🆕 自动文件保存** - 所有搜索详情自动保存到 `.search-results/` 文件夹，界面只显示简洁摘要
- **智能输入验证** - 所有搜索工具添加输入验证，防止空关键词搜索
- **高级搜索技巧** - 为每个平台提供5-7条专业搜索语法提示
- **相关搜索建议** - 智能推荐相关搜索词，提高搜索效率
- **多源搜索支持** - NPM支持网页和API两种搜索方式
- **平台详细介绍** - 国内平台搜索添加详细的平台说明和热门主题
- **快速导航链接** - 提供官方文档、社区等快速访问入口

#### 🚀 优化改进
- **网络搜索** - 支持结果数量参数，添加4种搜索技巧，提供其他引擎选项
- **GitHub搜索** - 优化URL构建，添加7种高级语法，智能相关搜索
- **StackOverflow** - 改进标签处理，添加热门技术标签推荐
- **NPM包搜索** - 双URL支持（网页+API），直达包详情页
- **技术文档** - 优先中文文档，添加框架常用主题，快速切换文档
- **API参考** - 支持DevDocs/GitHub多源搜索，常用库文档直达
- **微信文档** - 百度站内搜索+文档直达，常用API分类展示
- **国内平台** - 统一优化输出格式，添加平台介绍和搜索建议

#### 🗑️ 删除功能
- 移除编码规范提醒工具（`ai_coding_rules_reminder`）

#### 💾 文件保存功能
- 新增 `saveSearchResult()` 函数，自动创建 `.search-results/` 目录
- 所有14个搜索工具的详细信息保存为带时间戳的Markdown文件
- 搜索响应简化为摘要格式：关键词、搜索链接、文件保存路径
- 文件命名格式：`{tool-name}-{timestamp}.md`（如 `web-search-2025-10-03T10-30-45.md`）

#### 📝 文档更新
- 更新 README.md，添加详细的功能特性说明
- 添加3个实际使用示例
- 更新版本对比表
- 完善设计特点说明

#### 🔧 技术改进
- 统一错误处理机制
- 优化URL编码处理
- 改进Markdown输出格式
- 代码结构优化，提高可维护性

---

## [1.0.0] - 2025-09-30

### 极致精简版本
- 从15个工具精简到14个纯搜索工具
- 删除编码规范提醒功能

---

## [0.9.0] - 2025-09-30

### 🎉 重大更新 - 真实功能实现

**核心理念**：只保留真实可用的功能，删除所有虚假工具！

#### ❌ 删除的功能（18个假工具）
- 删除5个控制台监控工具（无法访问浏览器控制台）
- 删除13个假的规则/监督工具（只返回模板文本）

#### ✅ 保留并优化的功能（20个真实工具）

**1. 智能需求分析工具（5个） - 已验证真实可用**
- `ai_smart_wake` - 智能唤醒（支持小c/小C/MCP等唤醒词）
- `ai_analyze_requirement` - 需求分析（生成详细分析报告）
- `ai_generate_plan` - 开发计划生成（自动创建Markdown文档）
- `ai_breakdown_modules` - 需求拆解（生成TODO清单）
- `ai_confirm_action` - 用户确认

**2. 编码规范提醒工具（1个） - 全新真实实现**
- `ai_coding_rules_reminder` - 真正读取项目中的规范文档
  - 自动搜索并读取：CODING_STANDARDS.md、STYLE_GUIDE.md、CONTRIBUTING.md等
  - 读取真实内容并提醒Claude Code严格遵守
  - 支持严格模式和关注领域筛选
  - 如果没有找到规范文档，会返回通用编码规范

**3. 智能搜索工具（14个） - 优化为真实搜索**
- 所有搜索工具现在都会返回明确的WebFetch使用说明
- Claude Code会自动使用WebFetch工具获取真实搜索结果
- 6个国际搜索：web、github、stackoverflow、npm、docs、api_reference
- 8个国内搜索：wechat_docs、csdn、juejin、segmentfault、cnblogs、oschina、aliyun_docs、tencent_docs

#### 📊 对比

| 版本 | 总工具数 | 真实功能 | 假功能 | 诚实度 |
|------|---------|---------|--------|--------|
| v0.8.0 | 37个 | 5个 | 32个 | 13.5% |
| **v0.9.0** | **20个** | **20个** | **0个** | **100%** |

#### 💡 核心改进
- ✅ 100%真实可用 - 所有工具都经过验证
- ✅ 规则提醒真正读取项目文件
- ✅ 搜索功能真正获取结果（通过WebFetch）
- ✅ 需求分析真正生成文档文件
- ✅ 删除所有虚假承诺

---

## [0.8.0] - 2025-09-30

### ⭐ 重磅新功能 - 智能需求分析
新增5个强大的需求分析和项目规划工具，让AI帮你从需求到开发全流程自动化！

#### 🎯 新增工具
1. **`ai_smart_wake`** - 智能唤醒
   - 支持多种唤醒词（不区分大小写）
   - 推荐："小c，帮我分析需求" / "MCP启动，生成开发计划"
   - 也支持："小智" / "AI助手"
   - 自动识别唤醒词并给出友好回应

2. **`ai_analyze_requirement`** - 需求分析
   - 智能分析用户需求，生成详细分析报告
   - 支持3种分析深度：基础/详细/全面
   - 自动提供技术栈建议和开发建议

3. **`ai_generate_plan`** - 开发计划生成
   - 自动创建 `plan/` 文件夹
   - 生成完整的Markdown开发计划文档
   - 包含：项目概述、功能规划、技术架构、时间线、团队分工、风险评估等
   - 可选是否包含详细时间线

4. **`ai_breakdown_modules`** - 需求拆解
   - 将需求拆解为5大模块、25个具体任务
   - 自动生成两份文档：
     - 详细的模块拆解文档（包含任务描述、时间估算）
     - 快速TODO清单（按优先级排序）
   - 支持3种拆解粒度：粗/中/细

5. **`ai_confirm_action`** - 用户确认
   - 重要操作前自动征求用户意见
   - 交互式确认机制
   - 提高操作安全性

#### 📁 新增目录结构
```
project/
├── plan/                          # AI自动生成的项目文档
│   ├── 项目名-开发计划.md         # 完整开发计划
│   └── modules/                   # 模块拆解目录
│       ├── 项目名-需求拆解.md     # 详细任务拆解
│       └── 项目名-TODO.md         # 快速任务清单
```

#### 💡 完整工作流
```
用户: "小智，帮我分析需求：开发一个在线教育平台"
→ AI: 生成详细需求分析报告

用户: "生成开发计划"
→ AI: 创建plan文件夹，生成开发计划文档

用户: "拆解需求"
→ AI: 生成5个模块、25个任务的详细拆解

用户: "确认"
→ AI: 开始执行开发任务
```

#### 🔧 技术改进
- 引入 `fs/promises` 支持异步文件操作
- 引入 `path` 模块处理跨平台路径
- 完善错误处理和用户提示
- **优化搜索功能** - 所有搜索工具现在会明确提示必须使用WebFetch获取真实结果
- **唤醒词增强** - 支持"小c/小C"、"MCP"等多种唤醒方式，不区分大小写

#### 🔍 搜索功能优化
- ✅ 工具描述中增加【重要】标记，强调必须使用WebFetch
- ✅ 返回内容包含明确的WebFetch使用说明和示例
- ✅ 自动生成完整的WebFetch命令，包括URL和prompt参数
- ✅ 解决"只返回链接不返回结果"的问题

#### 📊 数据统计
- **工具总数**: 64个 → **69个** (+5个)
- **新增功能**: 智能需求分析套件 + 搜索功能优化
- **自动生成**: 开发计划、模块拆解、TODO清单
- **搜索改进**: 14个搜索工具全部优化，明确要求深度搜索

---

## [0.7.0] - 2025-09-30

### 🐛 重要修复
- **修复误报问题**: 不再使用 `grep` 检测配置，改用JSON精确解析
- **解决误判**: 配置文件包含对话历史，grep会误判历史消息中的关键词
- **准确检测**: 使用Python/Node.js解析JSON，只检测实际的mcpServers配置

### 💡 问题说明
旧版本使用：
```bash
grep -q "ai-rule-mcp-server" .claude.json
```

问题：`.claude.json` 包含对话历史，历史中提到 "ai-rule-mcp-server" 就会误判。

新版本：精确解析JSON，只检查 `mcpServers` 字段。

---

## [0.6.9] - 2025-09-30

### 🐛 重要修复
- **删除所有项目中的旧配置**: Claude Code按项目存储配置，现在会遍历所有项目删除旧配置
- **彻底清理**: 不仅删除全局配置，还删除每个项目目录中的旧配置
- **真正解决问题**: 修复了旧配置"删除后又出现"的问题

### 📈 功能改进
- 脚本会显示删除了哪些项目的配置
- 统计并显示总共删除的配置数量
- 更准确的清理结果提示

### 💡 问题说明
Claude Code的配置文件结构：
```json
{
  "projects": {
    "/path/to/project1": {
      "mcpServers": { ... }
    },
    "/path/to/project2": {
      "mcpServers": { ... }
    }
  }
}
```
每个项目都有独立的MCP配置，需要逐个清理。

---

## [0.6.8] - 2025-09-30

### 🎉 重大改进
- **真正自动化迁移**: 使用Python/Node.js自动删除JSON配置中的旧条目
- **无需手动操作**: 不再要求用户手动编辑配置文件
- **智能回退**: 如果没有Python/Node.js，才提示手动操作

### 🐛 修复
- 移除询问用户是否删除旧配置的步骤，直接自动删除
- 使用JSON解析器安全删除旧配置，避免破坏JSON格式
- 自动备份配置文件到 `.claude.json.backup`

### 📈 功能改进
- 优先使用 Python3 解析JSON
- 降级使用 Node.js 解析JSON
- 最后才提示手动操作

---

## [0.6.7] - 2025-09-30

### 🐛 修复
- **迁移脚本智能检测**: 检测到 smart-search-mcp 已存在时，询问是否重新配置
- **避免重复配置**: 防止多次运行脚本导致配置冲突
- **优雅处理已存在**: 提供删除旧配置并重新添加的选项

### 📈 功能改进
- 使用 `claude mcp list` 检查配置是否存在
- 提供跳过或重新配置的选择
- 更友好的用户提示

---

## [0.6.6] - 2025-09-30

### 🔄 重大变更
- **仓库更名**: GitHub仓库从 `Claude-code-codex` 更名为 `smart-search-mcp`
- **统一品牌**: 与NPM包名保持一致

### 📚 文档更新
- 更新所有文档中的GitHub链接
- 更新package.json仓库地址
- 更新所有shell脚本中的链接
- 修正README、CHANGELOG中的仓库引用

### 🔗 新链接
- GitHub: https://github.com/adminhuan/smart-search-mcp
- NPM: https://www.npmjs.com/package/smart-search-mcp

---

## [0.6.5] - 2025-09-30

### 🐛 修复
- **优化迁移脚本**: 移除用户选择环节，自动检测并安装
- **智能安装方式**: 自动检测 `claude` 命令，优先使用 Claude MCP 安装
- **配置备份**: 在删除旧配置前自动备份

### 📈 功能改进
- 简化迁移流程，减少用户操作步骤
- 更友好的提示信息
- 自动降级到npm全局安装（如果claude命令不可用）

---

## [0.6.4] - 2025-09-30

### 🎉 新增功能
- **一键迁移脚本**: 添加 `migrate.sh` 自动从旧版本升级
- **自动清理旧版本**: 迁移脚本会检测并卸载 `ai-rule-mcp-server`
- **智能配置检查**: 自动检测并提示清理旧配置

### 📚 文档更新
- 添加"从旧版本升级"专门章节
- 提供一键迁移脚本和手动迁移说明
- 在package.json中包含迁移脚本

---

## [0.6.3] - 2025-09-30

### 🎉 新增功能
- **一键迁移脚本**: 添加 `migrate.sh` 自动从旧版本升级
- **自动清理旧版本**: 迁移脚本会检测并卸载 `ai-rule-mcp-server`
- **智能配置检查**: 自动检测并提示清理旧配置

### 🐛 修复
- **修正Claude MCP命令格式**: 正确命令为 `claude mcp add smart-search-mcp npx smart-search-mcp`
- **验证命令可用性**: 经过实际测试确认命令正确工作

### 📚 文档更新
- 添加"从旧版本升级"专门章节
- 提供一键迁移脚本说明
- 更新README中的Claude MCP命令示例
- 添加手动迁移步骤说明

---

## [0.6.2] - 2025-09-30

### 📈 功能改进
- **添加Claude MCP命令支持**: 用户可直接使用 `claude mcp add smart-search-mcp npx smart-search-mcp` 安装
- **恢复一键安装脚本**: 更新 install.sh 支持新包名和Node.js环境
- **优化安装方式**: 提供5种安装方式，满足不同用户需求

### 📚 文档更新
- 更新README添加Claude MCP命令安装说明（修正命令格式）
- 重新组织安装方式优先级
- 完善一键脚本使用说明

### 🐛 修复
- 修正Claude MCP命令格式，去掉错误的 `--npm` 参数

---

## [0.6.1] - 2025-09-30

### 🔄 重大变更
- **包名变更**: `ai-rule-mcp-server` → `smart-search-mcp`
- **定位调整**: 突出智能搜索和调试功能作为核心特色
- **描述优化**: 更简洁明确的功能说明

### 📈 功能改进
- 重新组织工具优先级：搜索工具(14个) > 调试工具(5个) > 编码规范(38个) > 监督指导(7个)
- 简化安装流程，统一使用NPM包管理
- 优化README文档结构

### 📚 文档更新
- 更新所有文档中的包名引用
- 简化安装和配置说明
- 优化功能描述顺序

---

## [0.6.0] - 2025-09-30

### 🎉 新增功能

#### 🇨🇳 国内开发者平台搜索工具（8个全新工具）
- **`ai_search_wechat_docs`** - 微信开发者文档搜索
  - 支持小程序、公众号、开放平台、微信支付
  - 提供常用文档入口和开发工具链接
  - 包含HBuilderX跨平台开发建议

- **`ai_search_csdn`** - CSDN搜索
  - 支持博客和问答分类搜索
  - 提供搜索技巧和注意事项
  - 推荐高质量内容筛选方法

- **`ai_search_juejin`** - 掘金搜索
  - 支持热门、最新、点赞排序
  - 推荐小册、专栏等优质内容
  - 前端和全栈技术内容丰富

- **`ai_search_segmentfault`** - SegmentFault搜索
  - 专业技术问答社区
  - 支持标签筛选
  - 高质量技术讨论

- **`ai_search_cnblogs`** - 博客园搜索
  - 深度技术文章和系列教程
  - .NET和C#技术内容丰富
  - 长期维护的优质内容

- **`ai_search_oschina`** - 开源中国搜索
  - 支持资讯、博客、问答、项目搜索
  - Gitee代码托管平台
  - 开源项目和技术翻译

- **`ai_search_aliyun_docs`** - 阿里云文档搜索
  - 搜索阿里云产品和API文档
  - 支持产品范围筛选
  - 提供SDK、最佳实践等资源

- **`ai_search_tencent_docs`** - 腾讯云文档搜索
  - 搜索腾讯云产品和API文档
  - 支持产品范围筛选
  - 完整的开发者资源

### 📈 功能改进
- 工具总数从56个增加到64个
- 搜索工具从6个扩展到14个
- 全面覆盖国内主流开发者平台
- 特别优化微信生态开发支持
- 提供国内镜像站点和加速方案

### 📚 文档更新
- 更新README添加所有国内平台搜索说明
- 添加14个搜索工具的详细使用示例
- 完善国内平台使用技巧和注意事项

---

## [0.5.0] - 2025-09-30

### 🎉 新增功能

#### 🐛 控制台调试工具（5个全新工具）
- **`ai_console_error_monitor`** - 浏览器控制台错误监控
  - 支持多种错误类型分析：JavaScript、Network、CORS、Syntax、Reference、Type、Range
  - 提供针对性解决方案和调试步骤
  - 自动识别错误堆栈信息
  - 包含MDN和StackOverflow参考链接

- **`ai_console_warning_check`** - 控制台警告检查
  - 识别React、Vue、浏览器API等框架警告
  - 区分Deprecation、Performance、Security等警告类型
  - 提供修复建议和最佳实践

- **`ai_network_error_diagnosis`** - 网络请求错误诊断
  - 详细分析HTTP状态码（400、401、403、404、500、502、503等）
  - 区分客户端错误(4xx)和服务器错误(5xx)
  - 提供具体的排查步骤和解决方案
  - 推荐API测试工具（Postman、Insomnia等）

- **`ai_console_log_analyzer`** - 控制台日志智能分析
  - 自动统计错误、警告、网络请求数量
  - 识别性能问题模式
  - 提供日志优化建议
  - 推荐日志管理工具（Sentry、LogRocket等）

- **`ai_debug_suggestion`** - 系统化调试建议生成
  - 提供6步系统化调试流程
  - 包含常用调试命令和代码示例
  - 支持多种运行环境（Chrome、Firefox、Node.js等）
  - 提供预防措施建议（TypeScript、ESLint等）

### 📈 功能改进
- 工具总数从51个增加到56个
- 完善的错误诊断和解决方案系统
- 支持中文友好的错误提示

### 📚 文档更新
- 更新README添加控制台调试工具使用说明
- 添加详细的使用示例
- 创建CHANGELOG.md记录版本历史

---

## [0.4.0] - 2025-09-29

### 🎉 新增功能

#### 🔎 智能搜索工具（6个全新工具）
- **`ai_search_web`** - 多引擎网络搜索
  - 支持Google、Bing、百度、搜狗
  - 默认使用百度（国内网络优化）
  - 提供高级搜索技巧

- **`ai_search_github`** - GitHub搜索
  - 搜索仓库、代码、Issues、用户
  - 支持语言筛选和排序
  - 推荐国内镜像站（Gitee、GitCode）

- **`ai_search_stackoverflow`** - StackOverflow搜索
  - 搜索技术问答
  - 支持标签筛选
  - 推荐国内替代站（SegmentFault、掘金、CSDN）

- **`ai_search_npm`** - NPM包搜索
  - 搜索和评估NPM包
  - 提供包质量评估标准
  - 推荐淘宝NPM镜像

- **`ai_search_docs`** - 技术文档搜索
  - 支持React、Vue、Angular、Node.js、Python、Java等
  - 提供中英文文档链接
  - 推荐国内优质文档站

- **`ai_search_api_reference`** - API参考搜索
  - 快速查找API文档
  - 常用库直达链接
  - 推荐API测试工具

### 📈 功能改进
- 工具总数从45个增加到51个
- 国内网络访问优化
- 提供国内镜像站点推荐

---

## [0.3.0] - 2025-09-29

### 🎉 新增功能

#### 🔍 智能监督指导工具（7个全新工具）
- **`ai_guide_project_rules`** - 项目规则书生成指导
- **`ai_guide_development_plan`** - 开发计划生成指导
- **`ai_guide_pr_review`** - PR审查清单生成指导
- **`ai_guide_feature_request`** - 功能请求文档生成指导
- **`ai_validate_content`** - 内容质量检查
- **`ai_suggest_improvements`** - 改进建议生成
- **`ai_project_health_check`** - 项目健康检查

### 📈 功能改进
- 工具总数从38个增加到45个
- 增强AI监督能力，确保生成内容的专业性

---

## [0.2.0] - 2025-09-29

### 🔄 重大变更
- 使用官方MCP SDK重写服务器
- 从Python实现迁移到Node.js实现
- 移除Python依赖，简化安装流程

### 📈 功能改进
- 更好的性能和稳定性
- 简化的配置流程
- 纯Node.js实现，无需Python环境

---

## [0.1.0] - 2025-09-29

### 🎉 首次发布

#### 核心功能
- 38个基础AI规则遵守工具
- 4种工作模式（Normal/Plan/PR/FR）
- 智能规则提醒和代码检查
- 开发计划和PR管理
- 功能请求系统
- AI协作通信（可选）

#### 基础工具列表
- 规则提醒和管理
- 代码合规检查
- 工作模式切换
- 开发计划创建
- PR审查管理
- 功能请求提交

---

## 版本说明

本项目遵循[语义化版本控制](https://semver.org/zh-CN/)规范：

- **主版本号**：不兼容的API变更
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

## 链接

- [GitHub仓库](https://github.com/adminhuan/smart-search-mcp)
- [NPM包](https://www.npmjs.com/package/smart-search-mcp)
- [问题反馈](https://github.com/adminhuan/smart-search-mcp/issues)